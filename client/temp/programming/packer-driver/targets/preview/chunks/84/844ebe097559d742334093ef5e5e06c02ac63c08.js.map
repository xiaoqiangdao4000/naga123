{"version":3,"sources":["file:///Users/zzx/Desktop/naga123/client/assets/script/sgj/game_sgj.ts"],"names":["_decorator","Component","EventTarget","randomRangeInt","HTTP","sgj_data","ccclass","property","globalThis","sgjEvent","game_sgj","cmd_c_bet","type","data","cmd_c_bigSmall","cmd_s_bigSmall","iswin","bigsmall","wins_core","user_score","cmd_s_gameEnd","eventid","step","area","tiems","record","times","serverStepName","serverStepArea","gameState","bet_score","bet_start","start","i","sgj_normal","play","getServerData","getInstance","getRandomStep","getEndData","t_area","t_step","bs","mybetscore","getAllBetScore","winscore","push","console","log","onGameEnd","sgj_run","runCallBack","arg1","clearBetToZero","showEndArea","setWinScore","sgj_endFlash","sgj_view","all_btn","interactable","left_btn","right_btn","small_btn","big_btn","go_btn","bet1_btn","bet2_btn","bet3_btn","bet4_btn","bet5_btn","bet6_btn","bet7_btn","bet8_btn","score","refresh","setWinScoreView","getWinScore","setUserScore","userMgr","setUserScoreView","setBetScore","setBetScoreView","getBetScore","t_allbet","view","value","onMessage","sendMssage","msg","send","JSON","stringify","update","deltaTime","onEnable","on","onDisable","off"],"mappings":";;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAsEC,MAAAA,W,OAAAA,W;AAAaC,MAAAA,c,OAAAA,c;;AACjGC,MAAAA,I;;AAEAC,MAAAA,Q;;;;;;;;;OAED;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBP,U;AAE9BQ,MAAAA,UAAU,CAACC,QAAX,GAAsB,IAAIP,WAAJ,EAAtB;;0BAGaQ,Q,WADZJ,OAAO,CAAC,UAAD,C,gBAAR,MACaI,QADb,SAC8BT,SAD9B,CACwC;AAAA;AAAA;AAAA,eAGpCU,SAHoC,GAIhC;AACIC,YAAAA,IAAI,EAAE,WADV;AAEIC,YAAAA,IAAI,EAAE,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,EAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,EAAsB,CAAtB;AAFV,WAJgC;AAAA,eAUpCC,cAVoC,GAWhC;AACIF,YAAAA,IAAI,EAAE,gBADV;AAEIC,YAAAA,IAAI,EAAE,CAFV,CAEa;;AAFb,WAXgC;AAAA,eAiBpCE,cAjBoC,GAkBhC;AACIH,YAAAA,IAAI,EAAE,gBADV;AAEII,YAAAA,KAAK,EAAE,CAFX;AAEiB;AACbC,YAAAA,QAAQ,EAAE,CAHd;AAGiB;AACbC,YAAAA,SAAS,EAAE,CAJf;AAIkB;AACdC,YAAAA,UAAU,EAAE,CALhB,CAKkB;;AALlB,WAlBgC;AAAA,eA4BpCC,aA5BoC,GA6BhC;AACIR,YAAAA,IAAI,EAAE,eADV;AAEIS,YAAAA,OAAO,EAAE,CAFb;AAEiB;AACbC,YAAAA,IAAI,EAAE,EAHV;AAGiB;AACbC,YAAAA,IAAI,EAAE,EAJV;AAIiB;AACbC,YAAAA,KAAK,EAAE,EALX;AAKiB;AACbN,YAAAA,SAAS,EAAE,EANf;AAMmB;AACfC,YAAAA,UAAU,EAAE,CAPhB;AAOoB;AAChBM,YAAAA,MAAM,EAAE,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,EAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,EAAsB,CAAtB,CARZ,CAQwC;;AARxC,WA7BgC;AAAA,eAyCpCC,KAzCoC,GAyC5B,CAAC,CAAD,EAAI,EAAJ,EAAQ,EAAR,EAAY,EAAZ,EAAgB,EAAhB,EAAoB,EAApB,EAAwB,GAAxB,CAzC4B;AAAA,eA8CpCC,cA9CoC,GA8CnB,CAAC,IAAD,EAAO,IAAP,EAAa,MAAb,EAAqB,KAArB,EAA4B,IAA5B,EAAkC,KAAlC,EAAyC,IAAzC,EAA+C,IAA/C,EAAqD,KAArD,EAA4D,OAA5D,EAAqE,IAArE,EAA2E,KAA3E,EAAkF,IAAlF,EAAwF,IAAxF,EAA8F,KAA9F,EAAqG,IAArG,EAA2G,IAA3G,EAAiH,KAAjH,EAAwH,IAAxH,EACb,IADa,EACP,KADO,EACA,OADA,EACS,IADT,EACe,KADf,CA9CmB;AAAA,eAkDpCC,cAlDoC,GAkDnB,CAAC,CAAD,EAAI,CAAJ,EAAO,EAAP,EAAW,CAAX,EAAc,CAAd,EAAiB,EAAjB,EAAqB,CAArB,EAAwB,CAAxB,EAA2B,EAA3B,EAA+B,CAA/B,EAAkC,CAAlC,EAAqC,EAArC,EAAyC,CAAzC,EAA4C,CAA5C,EAA+C,EAA/C,EAAmD,CAAnD,EAAsD,CAAtD,EAAyD,EAAzD,EAA6D,CAA7D,EAAgE,CAAhE,EAAmE,EAAnE,EAAuE,CAAvE,EAA0E,CAA1E,EAA6E,EAA7E,CAlDmB;AAAA,eAqDpCC,SArDoC,GAqDxB,CArDwB;AAAA,eAsDpCX,SAtDoC,GAsDxB,CAtDwB;AAAA,eAuDpCY,SAvDoC,GAuDxB,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,EAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,EAAsB,CAAtB,CAvDwB;AAAA,eAwDpCC,SAxDoC,GAwDxB,CAxDwB;AAAA;;AAwDpB;AAEhB;AACAC,QAAAA,KAAK,GAAG;AACJxB,UAAAA,UAAU,CAACE,QAAX,GAAsB,IAAtB;AACA,eAAKmB,SAAL,GAAiB,CAAjB;AACA,eAAKE,SAAL,GAAiB,CAAjB;;AACA,eAAK,IAAIE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,CAApB,EAAuBA,CAAC,EAAxB,EAA4B;AACxB,iBAAKH,SAAL,CAAeG,CAAf,IAAoB,CAApB;AACH;;AACDzB,UAAAA,UAAU,CAAC0B,UAAX,CAAsBC,IAAtB;AACH,SAnEmC,CAqEpC;;;AACAC,QAAAA,aAAa,GAAG;AACZ,eAAKhB,aAAL,CAAmBE,IAAnB,GAA0B,EAA1B;AACA,eAAKF,aAAL,CAAmBG,IAAnB,GAA0B,EAA1B;AACA,eAAKH,aAAL,CAAmBI,KAAnB,GAA2B,EAA3B;AACA,eAAKJ,aAAL,CAAmBF,SAAnB,GAA+B,EAA/B,CAJY,CAMZ;;AACA,cAAIL,IAAI,GAAG;AAAA;AAAA,oCAASwB,WAAT,GAAuBC,aAAvB,EAAX;AAEA;AAAA;AAAA,oCAASD,WAAT,GAAuBE,UAAvB,CAAkC,KAAKT,SAAvC;AACA,iBAVY,CAYZ;;AACA,cAAKU,MAAM,GAAG,CAAT,IAAc,KAAKV,SAAL,CAAeU,MAAf,IAAyB,CAAxC,IAA8C3B,IAAI,CAACU,IAAL,IAAa,CAA/D,EAAiE;AACjE;AACI,mBAAKH,aAAL,CAAmBC,OAAnB,GAA6B,CAA7B,CADJ,CACmC;AAElC,aAJD,MAKK;AACL,aAEC,CArBW,CAwBZ;;;AACA,cAAIoB,MAAM,GAAG,CAAb,CAzBY,CAyBG;AAEf;;AACA,cAAIC,EAAE,GAAGvC,cAAc,CAAC,CAAD,EAAI,CAAJ,CAAvB,CA5BY,CA8BZ;;AACA,cAAIwC,UAAU,GAAG,KAAKC,cAAL,EAAjB,CA/BY,CAiCZ;;AACA,cAAIJ,MAAM,GAAG,KAAKZ,cAAL,CAAoBa,MAApB,CAAb;AACA,cAAID,MAAM,GAAG,CAAb,EAAgBA,MAAM,GAAGA,MAAM,GAAG,EAAlB,CAnCJ,CAqCZ;;AACA,cAAIA,MAAM,IAAI,CAAd,EAAiB;AACjB,aAEC,CAHD,MAIK,IAAI,KAAKV,SAAL,CAAeU,MAAf,IAAyB,CAA7B,EAAgC;AACrC;AACI;AACA,mBAAKpB,aAAL,CAAmBC,OAAnB,GAA6B,CAA7B,CAFJ,CAEmC;;AAC/B,kBAAI,KAAKD,aAAL,CAAmBC,OAAnB,IAA8B,CAAlC,EAAqC;AACrC;AACI,sBAAIwB,QAAQ,GAAG,KAAKf,SAAL,CAAeU,MAAf,IAAyB,KAAKd,KAAL,CAAWgB,EAAX,CAAxC;AACA,uBAAKtB,aAAL,CAAmBE,IAAnB,CAAwBwB,IAAxB,CAA6BL,MAA7B,EAFJ,CAEyC;;AACrC,uBAAKrB,aAAL,CAAmBG,IAAnB,CAAwBuB,IAAxB,CAA6BN,MAA7B,EAHJ,CAGyC;;AACrC,uBAAKpB,aAAL,CAAmBI,KAAnB,CAAyBsB,IAAzB,CAA8B,KAAKpB,KAAL,CAAWgB,EAAX,CAA9B,EAJJ,CAIkD;;AAC9C,uBAAKtB,aAAL,CAAmBF,SAAnB,CAA6B4B,IAA7B,CAAkCD,QAAlC,EALJ,CAKgD;AAC/C,iBAPD,MAQK,IAAI,KAAKzB,aAAL,CAAmBC,OAAnB,IAA8B,CAAlC,EAAqC;AAC1C;AACI,sBAAIwB,SAAQ,GAAG,CAAf;AACA,uBAAKzB,aAAL,CAAmBE,IAAnB,CAAwBwB,IAAxB,CAA6BL,MAA7B,EAFJ,CAEyC;;AACrC,uBAAKrB,aAAL,CAAmBG,IAAnB,CAAwBuB,IAAxB,CAA6BN,MAA7B,EAHJ,CAGyC;;AACrC,uBAAKpB,aAAL,CAAmBI,KAAnB,CAAyBsB,IAAzB,CAA8B,KAAKpB,KAAL,CAAWgB,EAAX,CAA9B,EAJJ,CAIkD;;AAC9C,uBAAKtB,aAAL,CAAmBF,SAAnB,CAA6B4B,IAA7B,CAAkCD,SAAlC,EALJ,CAKgD;AAC/C,iBAPI,MAQA,IAAI,KAAKzB,aAAL,CAAmBC,OAAnB,IAA8B,CAAlC,EAAqC;AAC1C;AACI,sBAAIwB,UAAQ,GAAGF,UAAU,GAAGxC,cAAc,CAAC,CAAD,EAAI,EAAJ,CAA1C;;AACA,uBAAKiB,aAAL,CAAmBE,IAAnB,CAAwBwB,IAAxB,CAA6BL,MAA7B,EAFJ,CAEyC;;AACrC,uBAAKrB,aAAL,CAAmBG,IAAnB,CAAwBuB,IAAxB,CAA6BN,MAA7B,EAHJ,CAGyC;;AACrC,uBAAKpB,aAAL,CAAmBI,KAAnB,CAAyBsB,IAAzB,CAA8B,KAAKpB,KAAL,CAAWgB,EAAX,CAA9B,EAJJ,CAIkD;;AAC9C,uBAAKtB,aAAL,CAAmBF,SAAnB,CAA6B4B,IAA7B,CAAkCD,UAAlC,EALJ,CAKgD;AAC/C;AACJ,aA5BI,MA6BA;AACD;AACA,gBAAIA,UAAQ,GAAG,CAAf;AACA,iBAAKzB,aAAL,CAAmBC,OAAnB,GAA6B,CAA7B;AACH;;AACD0B,UAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ,EAAyB,KAAK5B,aAA9B;AACA,iBAAO,KAAKA,aAAZ;AACH,SApJmC,CAsJpC;;;AACA6B,QAAAA,SAAS,GAAG;AACR;AACA;AACA,cAAIpC,IAAI,GAAG;AAAA;AAAA,oCAASwB,WAAT,GAAuBE,UAAvB,CAAkC,KAAKT,SAAvC,CAAX;AACAiB,UAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqBnC,IAArB;AACAL,UAAAA,UAAU,CAAC0C,OAAX,CAAmBf,IAAnB,CAAwB,KAAKf,aAAL,CAAmBE,IAAnB,CAAwB,CAAxB,CAAxB;AACH,SA7JmC,CA+JpC;;;AACA6B,QAAAA,WAAW,CAACC,IAAD,EAAe;AACtBL,UAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBI,IAAxB;AACAL,UAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqB,KAAK5B,aAA1B,EAFsB,CAItB;;AACA,eAAKiC,cAAL,CAAoB,CAApB,EAAuB,CAAvB,EALsB,CAMtB;;AACA,eAAKC,WAAL,CAAiB,KAAKlC,aAAL,CAAmBG,IAAnB,CAAwB,CAAxB,CAAjB,EAPsB,CAQtB;;AACA,eAAKQ,SAAL,GAAiB,CAAjB,CATsB,CAWtB;;AACA,cAAI,KAAKX,aAAL,CAAmBC,OAAnB,IAA8B,CAAlC,EAAqC;AACjC,iBAAKkC,WAAL,CAAiB,KAAKnC,aAAL,CAAmBF,SAAnB,CAA6B,CAA7B,CAAjB;AACA,iBAAKW,SAAL,GAAiB,CAAjB;AACArB,YAAAA,UAAU,CAACgD,YAAX,CAAwBrB,IAAxB,CAA6B,KAAKf,aAAL,CAAmBE,IAAhD,EAHiC,CAKjC;;AACAd,YAAAA,UAAU,CAACiD,QAAX,CAAoBC,OAApB,CAA4BC,YAA5B,GAA2C,IAA3C;AACAnD,YAAAA,UAAU,CAACiD,QAAX,CAAoBG,QAApB,CAA6BD,YAA7B,GAA4C,IAA5C;AACAnD,YAAAA,UAAU,CAACiD,QAAX,CAAoBI,SAApB,CAA8BF,YAA9B,GAA6C,IAA7C;AACAnD,YAAAA,UAAU,CAACiD,QAAX,CAAoBK,SAApB,CAA8BH,YAA9B,GAA6C,IAA7C;AACAnD,YAAAA,UAAU,CAACiD,QAAX,CAAoBM,OAApB,CAA4BJ,YAA5B,GAA2C,IAA3C;AACAnD,YAAAA,UAAU,CAACiD,QAAX,CAAoBO,MAApB,CAA2BL,YAA3B,GAA0C,IAA1C;AACAnD,YAAAA,UAAU,CAACiD,QAAX,CAAoBQ,QAApB,CAA6BN,YAA7B,GAA4C,IAA5C;AACAnD,YAAAA,UAAU,CAACiD,QAAX,CAAoBS,QAApB,CAA6BP,YAA7B,GAA4C,IAA5C;AACAnD,YAAAA,UAAU,CAACiD,QAAX,CAAoBU,QAApB,CAA6BR,YAA7B,GAA4C,IAA5C;AACAnD,YAAAA,UAAU,CAACiD,QAAX,CAAoBW,QAApB,CAA6BT,YAA7B,GAA4C,IAA5C;AACAnD,YAAAA,UAAU,CAACiD,QAAX,CAAoBY,QAApB,CAA6BV,YAA7B,GAA4C,IAA5C;AACAnD,YAAAA,UAAU,CAACiD,QAAX,CAAoBa,QAApB,CAA6BX,YAA7B,GAA4C,IAA5C;AACAnD,YAAAA,UAAU,CAACiD,QAAX,CAAoBc,QAApB,CAA6BZ,YAA7B,GAA4C,IAA5C;AACAnD,YAAAA,UAAU,CAACiD,QAAX,CAAoBe,QAApB,CAA6Bb,YAA7B,GAA4C,IAA5C;AAEA;AACH,WAlCqB,CAmCtB;;;AACA,eAAK9B,SAAL,GAAiB,CAAjB;AACH,SArMmC,CAuMpC;;;AACA0B,QAAAA,WAAW,CAACkB,KAAD,EAAgBC,OAAhB,EAAyC;AAAA,cAAzBA,OAAyB;AAAzBA,YAAAA,OAAyB,GAAN,IAAM;AAAA;;AAChD,eAAKxD,SAAL,GAAiBuD,KAAjB;AACA,cAAI,CAACC,OAAL,EAAc,OAFkC,CAGhD;;AACAlE,UAAAA,UAAU,CAACiD,QAAX,CAAoBkB,eAApB,CAAoCF,KAApC;AACH,SA7MmC,CA+MpC;;;AACAG,QAAAA,WAAW,GAAG;AACV,iBAAO,KAAK1D,SAAZ;AACH,SAlNmC,CAoNpC;;;AACA2D,QAAAA,YAAY,CAACJ,KAAD,EAAgBC,OAAhB,EAAyC;AAAA,cAAzBA,OAAyB;AAAzBA,YAAAA,OAAyB,GAAN,IAAM;AAAA;;AACjDlE,UAAAA,UAAU,CAACsE,OAAX,CAAmBL,KAAnB,GAA2BA,KAA3B;AACA,cAAI,CAACC,OAAL,EAAc,OAFmC,CAGjD;;AACAlE,UAAAA,UAAU,CAACiD,QAAX,CAAoBsB,gBAApB,CAAqCN,KAArC;AACH,SA1NmC,CA4NpC;;;AACAO,QAAAA,WAAW,CAACzD,IAAD,EAAekD,KAAf,EAA8BC,OAA9B,EAAuD;AAAA,cAAzBA,OAAyB;AAAzBA,YAAAA,OAAyB,GAAN,IAAM;AAAA;;AAC9D,cAAInD,IAAI,GAAG,CAAP,IAAYA,IAAI,GAAG,CAAvB,EAA0B;AAC1B,eAAKO,SAAL,CAAeP,IAAf,IAAuBkD,KAAvB;AACA,cAAI,CAACC,OAAL,EAAc,OAHgD,CAI9D;;AACAlE,UAAAA,UAAU,CAACiD,QAAX,CAAoBwB,eAApB,CAAoC1D,IAApC,EAA0CkD,KAA1C;AACH,SAnOmC,CAqOpC;;;AACAS,QAAAA,WAAW,CAAC3D,IAAD,EAAe;AACtB,cAAIA,IAAI,GAAG,CAAP,IAAYA,IAAI,GAAG,CAAvB,EAA0B;AAC1B,iBAAO,KAAKO,SAAL,CAAeP,IAAf,CAAP;AACH,SAzOmC,CA2OpC;;;AACAqB,QAAAA,cAAc,GAAG;AACb,cAAIuC,QAAQ,GAAG,CAAf;;AACA,eAAK,IAAIlD,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,CAApB,EAAuBA,CAAC,EAAxB,EAA4B;AACxBkD,YAAAA,QAAQ,IAAI,KAAKrD,SAAL,CAAeG,CAAf,CAAZ;AACH;;AACD,iBAAOkD,QAAP;AACH,SAlPmC,CAoPpC;;;AACA9B,QAAAA,cAAc,CAAC+B,IAAD,EAAeC,KAAf,EAA8B;AACxC,cAAID,IAAI,IAAI,CAAZ,EAAe;AACX,iBAAK,IAAInD,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,CAApB,EAAuBA,CAAC,EAAxB,EAA4B;AACxBzB,cAAAA,UAAU,CAACiD,QAAX,CAAoBwB,eAApB,CAAoChD,CAApC,EAAuC,CAAvC;AACH;AACJ;;AACD,cAAIoD,KAAK,IAAI,CAAb,EAAgB;AACZ,iBAAK,IAAIpD,EAAC,GAAG,CAAb,EAAgBA,EAAC,GAAG,CAApB,EAAuBA,EAAC,EAAxB,EAA4B;AACxB,mBAAKH,SAAL,CAAeG,EAAf,IAAoB,CAApB;AACH;AACJ;AACJ,SAhQmC,CAkQpC;;;AACAqB,QAAAA,WAAW,CAAC/B,IAAD,EAAe;AACtB,cAAIA,IAAI,GAAG,CAAP,IAAYA,IAAI,GAAG,CAAvB,EAA0B;AAC1Bf,UAAAA,UAAU,CAACiD,QAAX,CAAoBwB,eAApB,CAAoC1D,IAApC,EAA0C,KAAKO,SAAL,CAAeP,IAAf,CAA1C;AACH,SAtQmC,CAwQpC;;;AACA+D,QAAAA,SAAS,CAAC1E,IAAD,EAAOC,IAAP,EAAa;AAClBkC,UAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBnC,IAAxB;AACH,SA3QmC,CA6QpC;;;AACA0E,QAAAA,UAAU,CAAC3E,IAAD,EAAYC,IAAZ,EAAuB;AAC7B,cAAI2E,GAAG,GAAG;AACN5E,YAAAA,IAAI,EAAEA,IADA;AAENC,YAAAA,IAAI,EAAEA;AAFA,WAAV;AAIA;AAAA;AAAA,4BAAKwB,WAAL,GAAmBoD,IAAnB,CAAwBC,IAAI,CAACC,SAAL,CAAeH,GAAf,CAAxB;AACH;;AAEDI,QAAAA,MAAM,CAACC,SAAD,EAAoB,CAEzB;;AAEDC,QAAAA,QAAQ,GAAG;AACPtF,UAAAA,UAAU,CAACC,QAAX,CAAoBsF,EAApB,CAAuB,iBAAvB,EAA0C,KAAK5C,WAA/C,EAA4D,IAA5D;AACH;;AAED6C,QAAAA,SAAS,GAAG;AACRxF,UAAAA,UAAU,CAACC,QAAX,CAAoBwF,GAApB,CAAwB,iBAAxB,EAA2C,KAAK9C,WAAhD,EAA6D,IAA7D;AACH;;AAhSmC,O","sourcesContent":["import { _decorator, Component, Node, SpriteFrame, Sprite, resources, Prefab, instantiate, EventTarget, randomRangeInt } from 'cc';\nimport HTTP from '../utils/HTTP';\nimport { AudioMgr } from '../utils/AudioMgr';\nimport sgj_data from './sgj_data';\n\nconst { ccclass, property } = _decorator;\n\nglobalThis.sgjEvent = new EventTarget();\n\n@ccclass('game_sgj')\nexport class game_sgj extends Component {\n\n    //客户端消息----下注\n    cmd_c_bet =\n        {\n            type: 'cmd_c_bet',\n            data: [0, 0, 0, 0, 0, 0, 0, 0],\n        }\n\n    //客户端消息----猜大小,//猜大小，0为小（0-7），1为大（8-15）\n    cmd_c_bigSmall =\n        {\n            type: 'cmd_c_bigSmall',\n            data: 0, //赌注\n        }\n\n    //服务端消息----猜大小\n    cmd_s_bigSmall =\n        {\n            type: 'cmd_s_bigSmall',\n            iswin: 0,    //猜大小成功 0失败，1成功。\n            bigsmall: 0, //大小的实际数值\n            wins_core: 0, //赢分\n            user_score: 0,//分数\n        }\n\n    //服务端消息----开奖       \n    //中奖类型：0-不中奖，1-普通中奖，lucky：2-灭灯，3-翻倍，4-大三元，5-小三元，6-大四喜，7-众横四海，8-仙女散花，9-天龙八部，10-九莲宝灯，11-大满贯\n    cmd_s_gameEnd =\n        {\n            type: 'cmd_s_gameEnd',\n            eventid: 0,  //中奖类型：0-不中奖，1-普通中奖，lucky：2-灭灯，3-翻倍，4-大三元，5-小三元，6-大四喜，7-众横四海，8-仙女散花，9-天龙八部，10-九莲宝灯，11-大满贯\n            step: [],    //开奖格子,数组[24]\n            area: [],    //开奖区域,数组[24]\n            tiems: [],   //倍数,数组[24]\n            wins_core: [], //当前赢分,数组[24]\n            user_score: 0,  //分数\n            record: [0, 0, 0, 0, 0, 0, 0, 0],   //历史记录\n        }\n\n    //倍率\n    times = [5, 10, 15, 20, 30, 40, 100];\n\n    //0苹果、1橙子、2木瓜、3铃铛、4西瓜、5双星、677、7bar,8lucky\n    //倍率：5,10,15,20,30,40,100\n\n    serverStepName = ['橙子', '铃铛', '小bar', 'bar', '苹果', '小苹果', '木瓜', '西瓜', '小西瓜', 'lucky', '苹果', '小橙子', '橙子', '铃铛', '小77', '77', '苹果', '小木瓜', '木瓜',\n        '双星', '小双星', 'lucky', '苹果', '小铃铛'];\n\n    //格子对应的中奖区域\n    serverStepArea = [1, 3, 17, 7, 0, 10, 2, 4, 14, 8, 0, 11, 1, 3, 16, 6, 0, 12, 2, 5, 15, 8, 0, 13];\n\n    //游戏数据--------begin------\n    gameState = 0;  //游戏状态:0-下注，1-收分，2-比大小\n    wins_core = 0;  //赢分\n    bet_score = [0, 0, 0, 0, 0, 0, 0, 0];  //下注分数\n    bet_start = 0;  //续投\n\n    //游戏数据----------end-------\n    start() {\n        globalThis.game_sgj = this;\n        this.gameState = 0;\n        this.bet_start = 0;\n        for (let i = 0; i < 8; i++) {\n            this.bet_score[i] = 0;\n        }\n        globalThis.sgj_normal.play()\n    }\n\n    //模拟服务器数据\n    getServerData() {\n        this.cmd_s_gameEnd.step = [];\n        this.cmd_s_gameEnd.area = [];\n        this.cmd_s_gameEnd.tiems = [];\n        this.cmd_s_gameEnd.wins_core = [];\n\n        //获取中奖格子数据\n        let data = sgj_data.getInstance().getRandomStep();\n\n        sgj_data.getInstance().getEndData(this.bet_score);\n        return;\n\n        //判断玩家是否中奖\n        if ((t_area < 8 && this.bet_score[t_area] > 0) || data.area == 8)//中奖\n        {\n            this.cmd_s_gameEnd.eventid = 1;//randomRangeInt(1, 12);\n\n        }\n        else //不中奖\n        {\n\n        }\n\n\n        //获取随机--中奖格子\n        var t_step = 9;//randomRangeInt(0, 24);\n\n        //倍数\n        var bs = randomRangeInt(0, 8);\n\n        //获取玩家下注总和\n        var mybetscore = this.getAllBetScore();\n\n        //获取中奖区域\n        var t_area = this.serverStepArea[t_step];\n        if (t_area > 9) t_area = t_area - 10;\n\n        //中奖类型：0-不中奖，1-普通中奖，lucky：2-灭灯，3-翻倍，4-大三元，5-小三元，6-大四喜，7-众横四海，8-仙女散花，9-天龙八部，10-九莲宝灯，11-大满贯\n        if (t_area == 8) //比较特别\n        {\n\n        }\n        else if (this.bet_score[t_area] > 0) //中奖\n        {\n            //中奖类型\n            this.cmd_s_gameEnd.eventid = 1;//randomRangeInt(1, 12);\n            if (this.cmd_s_gameEnd.eventid == 1) //普通中奖\n            {\n                let winscore = this.bet_score[t_area] * this.times[bs];\n                this.cmd_s_gameEnd.step.push(t_step);//中奖格子\n                this.cmd_s_gameEnd.area.push(t_area);//中奖区域\n                this.cmd_s_gameEnd.tiems.push(this.times[bs]);//中奖倍数\n                this.cmd_s_gameEnd.wins_core.push(winscore);//中奖得分\n            }\n            else if (this.cmd_s_gameEnd.eventid == 2) //灭灯\n            {\n                let winscore = 0;\n                this.cmd_s_gameEnd.step.push(t_step);//中奖格子\n                this.cmd_s_gameEnd.area.push(t_area);//中奖区域\n                this.cmd_s_gameEnd.tiems.push(this.times[bs]);//中奖倍数\n                this.cmd_s_gameEnd.wins_core.push(winscore);//中奖得分\n            }\n            else if (this.cmd_s_gameEnd.eventid == 3) //翻倍\n            {\n                let winscore = mybetscore * randomRangeInt(1, 99);\n                this.cmd_s_gameEnd.step.push(t_step);//中奖格子\n                this.cmd_s_gameEnd.area.push(t_area);//中奖区域\n                this.cmd_s_gameEnd.tiems.push(this.times[bs]);//中奖倍数\n                this.cmd_s_gameEnd.wins_core.push(winscore);//中奖得分\n            }\n        }\n        else {\n            //不中奖\n            let winscore = 0;\n            this.cmd_s_gameEnd.eventid = 0;\n        }\n        console.log('11111111:', this.cmd_s_gameEnd);\n        return this.cmd_s_gameEnd;\n    }\n\n    //获取游戏结束数据，开始播放动画。\n    onGameEnd() {\n        //播放第一次动画\n        //let data = this.getServerData();\n        let data = sgj_data.getInstance().getEndData(this.bet_score);\n        console.log('开始游戏:', data);\n        globalThis.sgj_run.play(this.cmd_s_gameEnd.step[0]);\n    }\n\n    //正常动画回调\n    runCallBack(arg1: string) {\n        console.log('水果机回调函数:', arg1);\n        console.log('结束数据：', this.cmd_s_gameEnd)\n\n        //清理下注界面\n        this.clearBetToZero(1, 0);\n        //显示中奖下注区域\n        this.showEndArea(this.cmd_s_gameEnd.area[0]);\n        //续投\n        this.bet_start = 1;\n\n        //普通中奖、闪灯\n        if (this.cmd_s_gameEnd.eventid == 1) {\n            this.setWinScore(this.cmd_s_gameEnd.wins_core[0]);\n            this.gameState = 1;\n            globalThis.sgj_endFlash.play(this.cmd_s_gameEnd.step);\n\n            //按钮状态\n            globalThis.sgj_view.all_btn.interactable = true;\n            globalThis.sgj_view.left_btn.interactable = true;\n            globalThis.sgj_view.right_btn.interactable = true;\n            globalThis.sgj_view.small_btn.interactable = true;\n            globalThis.sgj_view.big_btn.interactable = true;\n            globalThis.sgj_view.go_btn.interactable = true;\n            globalThis.sgj_view.bet1_btn.interactable = true;\n            globalThis.sgj_view.bet2_btn.interactable = true;\n            globalThis.sgj_view.bet3_btn.interactable = true;\n            globalThis.sgj_view.bet4_btn.interactable = true;\n            globalThis.sgj_view.bet5_btn.interactable = true;\n            globalThis.sgj_view.bet6_btn.interactable = true;\n            globalThis.sgj_view.bet7_btn.interactable = true;\n            globalThis.sgj_view.bet8_btn.interactable = true;\n\n            return;\n        }\n        //没有中奖\n        this.gameState = 0;\n    }\n\n    //设置赢分: 数据，是否刷新界面\n    setWinScore(score: number, refresh: boolean = true) {\n        this.wins_core = score;\n        if (!refresh) return;\n        //刷新界面\n        globalThis.sgj_view.setWinScoreView(score);\n    }\n\n    //获取赢分\n    getWinScore() {\n        return this.wins_core;\n    }\n\n    //设置用户分数:数据，是否刷新界面\n    setUserScore(score: number, refresh: boolean = true) {\n        globalThis.userMgr.score = score;\n        if (!refresh) return;\n        //刷新界面\n        globalThis.sgj_view.setUserScoreView(score);\n    }\n\n    //设置下注分数:数据，是否刷新界面\n    setBetScore(area: number, score: number, refresh: boolean = true) {\n        if (area < 0 || area > 7) return;\n        this.bet_score[area] = score;\n        if (!refresh) return;\n        //刷新界面\n        globalThis.sgj_view.setBetScoreView(area, score);\n    }\n\n    //获取下注区域分数\n    getBetScore(area: number) {\n        if (area < 0 || area > 7) return;\n        return this.bet_score[area];\n    }\n\n    //获取下注区域总分数\n    getAllBetScore() {\n        let t_allbet = 0;\n        for (let i = 0; i < 8; i++) {\n            t_allbet += this.bet_score[i];\n        }\n        return t_allbet;\n    }\n\n    //清理下注为0 view界面、value值 0不清理，1清理\n    clearBetToZero(view: number, value: number) {\n        if (view == 1) {\n            for (let i = 0; i < 8; i++) {\n                globalThis.sgj_view.setBetScoreView(i, 0);\n            }\n        }\n        if (value == 1) {\n            for (let i = 0; i < 8; i++) {\n                this.bet_score[i] = 0;\n            }\n        }\n    }\n\n    //显示中奖下注区域\n    showEndArea(area: number) {\n        if (area < 0 || area > 7) return;\n        globalThis.sgj_view.setBetScoreView(area, this.bet_score[area]);\n    }\n\n    //接受消息\n    onMessage(type, data) {\n        console.log('收到服务器消息：', data);\n    }\n\n    //发送消息\n    sendMssage(type: any, data: any) {\n        let msg = {\n            type: type,\n            data: data,\n        }\n        HTTP.getInstance().send(JSON.stringify(msg));\n    }\n\n    update(deltaTime: number) {\n\n    }\n\n    onEnable() {\n        globalThis.sgjEvent.on('sgj_runcallback', this.runCallBack, this);\n    }\n\n    onDisable() {\n        globalThis.sgjEvent.off('sgj_runcallback', this.runCallBack, this);\n    }\n}"]}