{"version":3,"sources":["file:///C:/Users/zzx/Desktop/naga123/client/assets/script/sgj/sgj_data.ts"],"names":["sgj_data","randomRangeInt","times","serverStepName","serverStepArea","cmd_s_gameEnd","type","eventid","step","area","tiems","win_score","user_score","record","getInstance","instance","getAllBetScore","betscore","score","i","getStepData","randomStep","t_step","t_area","t_times","winscore","getEndData","endData","data","push","t_winscore"],"mappings":"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","sourcesContent":["import { randomRangeInt, sys } from \"cc\";\r\n\r\nexport default class sgj_data {\r\n    public static instance = null;\r\n    static getInstance() {\r\n        if (this.instance == null) {\r\n            this.instance = new sgj_data();\r\n            return this.instance;\r\n        }\r\n        else {\r\n            return this.instance;\r\n        }\r\n    }\r\n    public times = [5, 10, 15, 20, 30, 40, 100];\r\n    public serverStepName = ['橙子', '铃铛', '小bar', 'bar', '苹果', '小苹果', '木瓜', '西瓜', '小西瓜', 'lucky', '苹果', '小橙子', '橙子', '铃铛',\r\n        '小77', '77', '苹果', '小木瓜', '木瓜', '双星', '小双星', 'lucky', '苹果', '小铃铛'];\r\n    //格子对应的中奖区域\r\n    public serverStepArea = [1, 3, 17, 7, 0, 10, 2, 4, 14, 8, 0, 11, 1, 3, 16, 6, 0, 12, 2, 5, 15, 8, 0, 13];\r\n    public cmd_s_gameEnd =\r\n        {\r\n            type: 'cmd_s_gameEnd',\r\n            eventid: 0,  //中奖类型：0-不中奖，1-普通中奖，lucky：2-灭灯，3-翻倍，4-大三元，5-小三元，6-大四喜，7-众横四海，8-仙女散花，9-天龙八部，10-九莲宝灯，11-大满贯\r\n            step: [],    //开奖格子,数组[24]\r\n            area: [],    //开奖区域,数组[24]\r\n            tiems: [],   //倍数,数组[24]\r\n            win_score: [], //当前赢分,数组[24]\r\n            user_score: 0,  //分数\r\n            record: [0, 0, 0, 0, 0, 0, 0, 0],   //历史记录\r\n        }\r\n    getAllBetScore(betscore) {\r\n        let score = 0;\r\n        for (let i = 0; i < 8; i++) {\r\n            score += betscore;\r\n        }\r\n        return score;\r\n    }\r\n    getStepData(randomStep, betscore) {\r\n        let t_step = randomStep;\r\n        let t_area = this.serverStepArea[t_step];\r\n        if (t_area > 9) t_area -= 10;\r\n        let t_times = this.times[randomRangeInt(0, 7)];\r\n        let winscore = 0;\r\n        if (t_area == 8) winscore = randomRangeInt(1, 100) * t_times;\r\n        else winscore = betscore[t_area] * t_times;\r\n        return [t_step, t_area, t_times, winscore];\r\n    }\r\n\r\n    //获取中奖数据\r\n    getEndData(betscore) {\r\n        let endData = this.cmd_s_gameEnd;\r\n        endData.step = [];\r\n        endData.area = [];\r\n        endData.tiems = [];\r\n        endData.win_score = [];\r\n        //获取第一次中奖格子\r\n        let t_step = randomRangeInt(0, 24);\r\n        let data = this.getStepData(t_step, betscore)\r\n        endData.step.push(data[0]);\r\n        endData.area.push(data[1]);\r\n        endData.tiems.push(data[2]);\r\n        endData.win_score.push(data[3]);\r\n        endData.eventid = 0;\r\n        let t_area = data[1];\r\n        let t_winscore = data[3];\r\n\r\n\r\n        //判断是否中奖--中奖类型：0-不中奖，1-普通中奖，lucky：2-灭灯，3-翻倍，4-大三元，5-小三元，6-大四喜，7-众横四海，8-仙女散花，9-天龙八部，10-九莲宝灯，11-大满贯\r\n        if (t_area == 8 || (t_area < 8 && betscore[t_area] > 0)) //lucky\r\n        {\r\n            endData.eventid = 1;//randomRangeInt(1,12);\r\n            if (endData.eventid == 1) //1-普通中奖\r\n            {\r\n            }\r\n            else if (this.cmd_s_gameEnd.eventid == 2) //2送灯--灭灯\r\n            {\r\n                endData.step.push(data[0]);\r\n                endData.area.push(data[1]);\r\n                endData.tiems.push(data[2]);\r\n                endData.win_score.push(0);\r\n            }\r\n            else if (this.cmd_s_gameEnd.eventid == 2) //3送灯--翻倍\r\n            {\r\n                endData.step.push(data[0]);\r\n                endData.area.push(data[1]);\r\n                endData.tiems.push(data[2]);\r\n                endData.win_score.push(t_winscore);\r\n            }\r\n        }\r\n\r\n        return endData;\r\n    }\r\n\r\n\r\n}"]}