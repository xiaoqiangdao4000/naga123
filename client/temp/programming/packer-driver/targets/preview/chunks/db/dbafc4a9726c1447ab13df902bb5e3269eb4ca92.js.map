{"version":3,"sources":["file:///Users/zzx/Desktop/naga123/client/assets/script/sgj/sgj_moveScore.ts"],"names":["_decorator","Component","AudioMgr","ccclass","property","sgj_moveScore","scoretime_add","start","globalThis","play","win","sgj_view","getWinScore","schedule","updateScore","stop","unschedule","inst","setWinScore","userMgr","score","setUserScore","playOneShot","update","deltaTime"],"mappings":";;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;;AACZC,MAAAA,Q,iBAAAA,Q;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBJ,U;;+BAGjBK,a,WADZF,OAAO,CAAC,eAAD,C,gBAAR,MACaE,aADb,SACmCJ,SADnC,CAC6C;AAAA;AAAA;AAAA,eACzCK,aADyC,GACzB,CADyB;AAAA;;AAGzCC,QAAAA,KAAK,GAAG;AACJC,UAAAA,UAAU,CAACH,aAAX,GAA2B,IAA3B;AACH;;AAEDI,QAAAA,IAAI,GAAG;AACH,cAAIC,GAAG,GAAGF,UAAU,CAACG,QAAX,CAAoBC,WAApB,EAAV;AACA,eAAKN,aAAL,GAAqB,CAArB,CAFG,CAIH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,eAAKO,QAAL,CAAc,KAAKC,WAAnB,EAAgC,GAAhC;AACH;;AAEDC,QAAAA,IAAI,GAAG;AACH,eAAKC,UAAL,CAAgB,KAAKF,WAArB;AACA;AAAA;AAAA,oCAASG,IAAT,CAAcF,IAAd;AACH;;AAEDD,QAAAA,WAAW,GAAG;AACV,cAAIJ,GAAG,GAAGF,UAAU,CAACG,QAAX,CAAoBC,WAApB,EAAV;;AACA,cAAIF,GAAG,GAAG,CAAV,EAAa;AACTF,YAAAA,UAAU,CAACG,QAAX,CAAoBO,WAApB,CAAgCR,GAAG,GAAG,CAAtC;AACAF,YAAAA,UAAU,CAACW,OAAX,CAAmBC,KAAnB,GAA2BZ,UAAU,CAACW,OAAX,CAAmBC,KAAnB,GAA2B,CAAtD;AACAZ,YAAAA,UAAU,CAACG,QAAX,CAAoBU,YAApB,CAAiCb,UAAU,CAACW,OAAX,CAAmBC,KAApD;AACA;AAAA;AAAA,sCAASH,IAAT,CAAcK,WAAd,CAA0B,UAA1B;AACH,WALD,MAMK;AACD,iBAAKP,IAAL;AACH;AACJ;;AAEDQ,QAAAA,MAAM,CAACC,SAAD,EAAoB,CAEzB;;AAxDwC,O","sourcesContent":["import { _decorator, Component, Node } from 'cc';\nimport { AudioMgr } from '../utils/AudioMgr';\nconst { ccclass, property } = _decorator;\n\n@ccclass('sgj_moveScore')\nexport class sgj_moveScore extends Component {\n    scoretime_add = 1;\n\n    start() {\n        globalThis.sgj_moveScore = this;\n    }\n\n    play() {\n        let win = globalThis.sgj_view.getWinScore();\n        this.scoretime_add = 1;\n\n        // if (win < 50) {\n        //     this.scoretime_add = Math.floor(win / 5);\n        //     AudioMgr.inst.playOneShot(\"moveScroe\");\n        // }\n        // else if (win < 300) {\n        //     this.scoretime_add = Math.floor(win / 10);\n        // }\n        // else if (win < 700) {\n        //     this.scoretime_add = Math.floor(win / 15);\n        // }\n        // else if (win < 1000) {\n        //     this.scoretime_add = Math.floor(win / 20);\n        // }\n        // else if (win < 2000) {\n        //     this.scoretime_add = Math.floor(win / 25);\n        // }\n        // else if (win < 4000) {\n        //     this.scoretime_add = Math.floor(win / 30);\n        // }\n        // else {\n        //     this.scoretime_add = Math.floor(win / 40);\n        // }\n        this.schedule(this.updateScore, 0.6);\n    }\n\n    stop() {\n        this.unschedule(this.updateScore);\n        AudioMgr.inst.stop()\n    }\n\n    updateScore() {\n        let win = globalThis.sgj_view.getWinScore();\n        if (win > 0) {\n            globalThis.sgj_view.setWinScore(win - 1);\n            globalThis.userMgr.score = globalThis.userMgr.score + 1;\n            globalThis.sgj_view.setUserScore(globalThis.userMgr.score);\n            AudioMgr.inst.playOneShot(\"getscroe\");\n        }\n        else {\n            this.stop();\n        }\n    }\n\n    update(deltaTime: number) {\n\n    }\n}\n\n"]}