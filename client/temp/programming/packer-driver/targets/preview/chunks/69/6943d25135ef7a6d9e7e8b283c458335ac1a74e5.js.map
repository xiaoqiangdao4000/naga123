{"version":3,"sources":["file:///Users/zzx/Desktop/naga123/client/assets/script/login/loginMessage.ts"],"names":["_decorator","Component","ccclass","property","loginMessage","_ws","start","connectServer","update","deltaTime","ws","WebSocket","globalThis","loginWs","onopen","console","log","send","onmessage","result","msg","JSON","parse","data","type","onMessage"],"mappings":";;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;;;;;;;;;OACf;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBH,U;;8BAGjBI,Y,WADZF,OAAO,CAAC,cAAD,C,gBAAR,MACaE,YADb,SACkCH,SADlC,CAC4C;AAAA;AAAA;AAAA,eAExCI,GAFwC,GAE9B,IAF8B;AAAA;;AAIxCC,QAAAA,KAAK,GAAG;AACJ,eAAKC,aAAL;AACH;;AAEDC,QAAAA,MAAM,CAACC,SAAD,EAAoB,CAEzB;;AAEDF,QAAAA,aAAa,GAAG;AACZ,cAAMG,EAAE,GAAG,IAAIC,SAAJ,CAAc,qBAAd,CAAX;AACAC,UAAAA,UAAU,CAACC,OAAX,GAAqBH,EAArB;;AACAA,UAAAA,EAAE,CAACI,MAAH,GAAY,MAAM;AACdC,YAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ;AACAN,YAAAA,EAAE,CAACO,IAAH,CAAQ,WAAR;AACH,WAHD;;AAKAP,UAAAA,EAAE,CAACQ,SAAH,GAAgBC,MAAD,IAAY;AACvB,gBAAIC,GAAG,GAAGC,IAAI,CAACC,KAAL,CAAWH,MAAM,CAACI,IAAlB,CAAV;AACA,gBAAIC,IAAI,GAAGJ,GAAG,CAACI,IAAf;AACA,gBAAID,IAAI,GAAGH,GAAG,CAACG,IAAf;AACA,iBAAKE,SAAL,CAAeD,IAAf,EAAqBD,IAArB;AACH,WALD;AAMH;;AAEDE,QAAAA,SAAS,CAACD,IAAD,EAAOD,IAAP,EACT;AACIR,UAAAA,OAAO,CAACC,GAAR,CAAY,cAAYQ,IAAZ,GAAiB,MAAjB,GAAwBD,IAApC;AACH;;AA/BuC,O","sourcesContent":["import { _decorator, Component, Node } from 'cc';\nconst { ccclass, property } = _decorator;\n\n@ccclass('loginMessage')\nexport class loginMessage extends Component {\n\n    _ws:any = null;\n\n    start() {\n        this.connectServer();\n    }\n\n    update(deltaTime: number) {\n\n    }\n\n    connectServer() {\n        const ws = new WebSocket('ws://127.0.0.1:3000')\n        globalThis.loginWs = ws;\n        ws.onopen = () => {\n            console.log('连接服务器成功！');\n            ws.send('你好，我是客户端！')\n        }\n\n        ws.onmessage = (result) => {\n            let msg = JSON.parse(result.data);\n            let type = msg.type;\n            let data = msg.data;\n            this.onMessage(type, data);\n        }\n    }\n\n    onMessage(type, data)\n    {\n        console.log('接受到服务器消息:'+type+',数据:'+data);\n    }\n}\n\n"]}