{"version":3,"sources":["file:///C:/Users/zzx/Desktop/naga123/client/assets/script/sgj/sgj_moveScore.ts"],"names":["_decorator","Component","AudioMgr","ccclass","property","sgj_moveScore","scoretime_add","start","globalThis","play","stop","win","game_sgj","getWinScore","SocreMoveByAll","schedule","updateScore","unschedule","t_game_sgj","setWinScore","userMgr","score","setUserScore","inst","gameState","sgj_view","all_btn","interactable","left_btn","right_btn","small_btn","big_btn","go_btn","bet1_btn","bet2_btn","bet3_btn","bet4_btn","bet5_btn","bet6_btn","bet7_btn","bet8_btn","update","deltaTime"],"mappings":"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","sourcesContent":["import { _decorator, Component, Node } from 'cc';\r\nimport { AudioMgr } from '../utils/AudioMgr';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('sgj_moveScore')\r\nexport class sgj_moveScore extends Component {\r\n    scoretime_add = 1;\r\n\r\n    start() {\r\n        globalThis.sgj_moveScore = this;\r\n    }\r\n\r\n    play() {\r\n        this.stop();\r\n        let win = globalThis.game_sgj.getWinScore();\r\n        this.scoretime_add = 1;\r\n\r\n        // if (win < 50) {\r\n        //     this.scoretime_add = Math.floor(win / 5);\r\n        //     AudioMgr.inst.playOneShot(\"moveScroe\");\r\n        // }\r\n        // else if (win < 300) {\r\n        //     this.scoretime_add = Math.floor(win / 10);\r\n        // }\r\n        // else if (win < 700) {\r\n        //     this.scoretime_add = Math.floor(win / 15);\r\n        // }\r\n        // else if (win < 1000) {\r\n        //     this.scoretime_add = Math.floor(win / 20);\r\n        // }\r\n        // else if (win < 2000) {\r\n        //     this.scoretime_add = Math.floor(win / 25);\r\n        // }\r\n        // else if (win < 4000) {\r\n        //     this.scoretime_add = Math.floor(win / 30);\r\n        // }\r\n        // else {\r\n        //     this.scoretime_add = Math.floor(win / 40);\r\n        // }\r\n        if(win > 50)\r\n        {\r\n            this.SocreMoveByAll();\r\n        }\r\n        else\r\n        {\r\n            this.schedule(this.updateScore, 0.05);\r\n        }\r\n        \r\n    }\r\n\r\n    stop() {\r\n        this.unschedule(this.updateScore);\r\n    }\r\n\r\n    updateScore() {\r\n        let t_game_sgj = globalThis.game_sgj;\r\n        let win = t_game_sgj.getWinScore();\r\n        if (win > 0) {\r\n            t_game_sgj.setWinScore(win - 1);\r\n            globalThis.userMgr.score = globalThis.userMgr.score + 1;\r\n            t_game_sgj.setUserScore(globalThis.userMgr.score);\r\n            AudioMgr.inst.play('sound/sgj/getscore')\r\n        }\r\n        else {\r\n            this.stop();\r\n            globalThis.game_sgj.gameState = 0;\r\n            globalThis.sgj_view.all_btn.interactable = true;\r\n            globalThis.sgj_view.left_btn.interactable = false;\r\n            globalThis.sgj_view.right_btn.interactable = false;\r\n            globalThis.sgj_view.small_btn.interactable = false;\r\n            globalThis.sgj_view.big_btn.interactable = false;\r\n            globalThis.sgj_view.go_btn.interactable = true;\r\n            globalThis.sgj_view.bet1_btn.interactable = true;\r\n            globalThis.sgj_view.bet2_btn.interactable = true;\r\n            globalThis.sgj_view.bet3_btn.interactable = true;\r\n            globalThis.sgj_view.bet4_btn.interactable = true;\r\n            globalThis.sgj_view.bet5_btn.interactable = true;\r\n            globalThis.sgj_view.bet6_btn.interactable = true;\r\n            globalThis.sgj_view.bet7_btn.interactable = true;\r\n            globalThis.sgj_view.bet8_btn.interactable = true;\r\n        }\r\n    }\r\n\r\n    SocreMoveByAll()\r\n    {\r\n        let t_game_sgj = globalThis.game_sgj;\r\n        let win = t_game_sgj.getWinScore();\r\n        t_game_sgj.setWinScore(0);\r\n        globalThis.userMgr.score = globalThis.userMgr.score + win;\r\n        t_game_sgj.setUserScore(globalThis.userMgr.score);\r\n        AudioMgr.inst.play('sound/sgj/moveScore');\r\n    }\r\n\t\r\n    update(deltaTime: number) {\r\n\r\n    }\r\n}"]}