{"version":3,"sources":["file:///Users/zzx/Desktop/naga123/client/assets/script/sgj/sgj_moveScore.ts"],"names":["_decorator","Component","AudioMgr","ccclass","property","sgj_moveScore","scoretime_add","start","globalThis","play","win","game_sgj","getWinScore","schedule","updateScore","stop","unschedule","inst","t_game_sgj","setWinScore","userMgr","score","setUserScore","update","deltaTime"],"mappings":";;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;;AACZC,MAAAA,Q,iBAAAA,Q;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBJ,U;;+BAGjBK,a,WADZF,OAAO,CAAC,eAAD,C,gBAAR,MACaE,aADb,SACmCJ,SADnC,CAC6C;AAAA;AAAA;AAAA,eACzCK,aADyC,GACzB,CADyB;AAAA;;AAGzCC,QAAAA,KAAK,GAAG;AACJC,UAAAA,UAAU,CAACH,aAAX,GAA2B,IAA3B;AACH;;AAEDI,QAAAA,IAAI,GAAG;AACH,cAAIC,GAAG,GAAGF,UAAU,CAACG,QAAX,CAAoBC,WAApB,EAAV;AACA,eAAKN,aAAL,GAAqB,CAArB,CAFG,CAIH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,eAAKO,QAAL,CAAc,KAAKC,WAAnB,EAAgC,IAAhC;AACH;;AAEDC,QAAAA,IAAI,GAAG;AACH,eAAKC,UAAL,CAAgB,KAAKF,WAArB;AACA;AAAA;AAAA,oCAASG,IAAT,CAAcF,IAAd;AACH;;AAEDD,QAAAA,WAAW,GAAG;AACV,cAAII,UAAU,GAAGV,UAAU,CAACG,QAA5B;AACA,cAAID,GAAG,GAAGQ,UAAU,CAACN,WAAX,EAAV;;AACA,cAAIF,GAAG,GAAG,CAAV,EAAa;AACTQ,YAAAA,UAAU,CAACC,WAAX,CAAuBT,GAAG,GAAG,CAA7B;AACAF,YAAAA,UAAU,CAACY,OAAX,CAAmBC,KAAnB,GAA2Bb,UAAU,CAACY,OAAX,CAAmBC,KAAnB,GAA2B,CAAtD;AACAH,YAAAA,UAAU,CAACI,YAAX,CAAwBd,UAAU,CAACY,OAAX,CAAmBC,KAA3C;AACA;AAAA;AAAA,sCAASJ,IAAT,CAAcR,IAAd,CAAmB,oBAAnB;AACH,WALD,MAMK,CAEJ;AACJ;;AAEDc,QAAAA,MAAM,CAACC,SAAD,EAAoB,CAEzB;;AAzDwC,O","sourcesContent":["import { _decorator, Component, Node } from 'cc';\nimport { AudioMgr } from '../utils/AudioMgr';\nconst { ccclass, property } = _decorator;\n\n@ccclass('sgj_moveScore')\nexport class sgj_moveScore extends Component {\n    scoretime_add = 1;\n\n    start() {\n        globalThis.sgj_moveScore = this;\n    }\n\n    play() {\n        let win = globalThis.game_sgj.getWinScore();\n        this.scoretime_add = 1;\n\n        // if (win < 50) {\n        //     this.scoretime_add = Math.floor(win / 5);\n        //     AudioMgr.inst.playOneShot(\"moveScroe\");\n        // }\n        // else if (win < 300) {\n        //     this.scoretime_add = Math.floor(win / 10);\n        // }\n        // else if (win < 700) {\n        //     this.scoretime_add = Math.floor(win / 15);\n        // }\n        // else if (win < 1000) {\n        //     this.scoretime_add = Math.floor(win / 20);\n        // }\n        // else if (win < 2000) {\n        //     this.scoretime_add = Math.floor(win / 25);\n        // }\n        // else if (win < 4000) {\n        //     this.scoretime_add = Math.floor(win / 30);\n        // }\n        // else {\n        //     this.scoretime_add = Math.floor(win / 40);\n        // }\n        this.schedule(this.updateScore, 0.05);\n    }\n\n    stop() {\n        this.unschedule(this.updateScore);\n        AudioMgr.inst.stop()\n    }\n\n    updateScore() {\n        let t_game_sgj = globalThis.game_sgj;\n        let win = t_game_sgj.getWinScore();\n        if (win > 0) {\n            t_game_sgj.setWinScore(win - 1);\n            globalThis.userMgr.score = globalThis.userMgr.score + 1;\n            t_game_sgj.setUserScore(globalThis.userMgr.score);\n            AudioMgr.inst.play('sound/sgj/getscore')\n        }\n        else {\n\n        }\n    }\n\n    update(deltaTime: number) {\n\n    }\n}\n\n"]}