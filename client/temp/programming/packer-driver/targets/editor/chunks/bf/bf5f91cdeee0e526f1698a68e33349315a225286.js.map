{"version":3,"sources":["file:///C:/Users/zzx/Desktop/naga123/client/assets/script/utils/userMgr.ts"],"names":["_decorator","Component","sys","ccclass","property","userMgr","account","userid","nickname","score","sign","ip","sex","roomid","getInstance","instance","start","console","log","globalThis","getAccount","userData","localStorage","getItem","data","JSON","parse","userinfo","password","saveAccount","setItem","stringify","update","deltaTime"],"mappings":";;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAiBC,MAAAA,G,OAAAA,G;;;;;;;;;OAChC;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBJ,U;;yBAEjBK,O,WADZF,OAAO,CAAC,SAAD,C,2BAAR,MACaE,OADb,SAC6BJ,SAD7B,CACuC;AAAA;AAAA;AAAA,eAE5BK,OAF4B,GAElB,IAFkB;AAAA,eAG5BC,MAH4B,GAGnB,CAHmB;AAAA,eAI5BC,QAJ4B,GAIjB,EAJiB;AAAA,eAK5BC,KAL4B,GAKpB,CALoB;AAAA,eAM5BC,IAN4B,GAMrB,CANqB;AAAA,eAO5BC,EAP4B,GAOvB,EAPuB;AAAA,eAQ5BC,GAR4B,GAQtB,CARsB;AAAA,eAS5BC,MAT4B,GASnB,IATmB;AAAA;;AAYV,eAAXC,WAAW,GAAG;AACxB,cAAIT,OAAO,CAACU,QAAR,IAAoB,IAAxB,EAA8B;AAC1BV,YAAAA,OAAO,CAACU,QAAR,GAAmB,IAAIV,OAAJ,EAAnB;AACA,mBAAOA,OAAO,CAACU,QAAf;AACH,WAHD,MAIK;AACD,mBAAOV,OAAO,CAACU,QAAf;AACH;AACJ;;AAEDC,QAAAA,KAAK,GAAG;AACJC,UAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ;AACAC,UAAAA,UAAU,CAACd,OAAX,GAAqBA,OAAO,CAACS,WAAR,EAArB;AACH,SAzBkC,CA2BnC;;;AACAM,QAAAA,UAAU,GAAG;AACT,cAAIC,QAAQ,GAAGnB,GAAG,CAACoB,YAAJ,CAAiBC,OAAjB,CAAyB,UAAzB,CAAf;AACA,cAAIC,IAAI,GAAGC,IAAI,CAACC,KAAL,CAAWL,QAAX,CAAX;AACA,cAAIM,QAAQ,GAAG;AACXrB,YAAAA,OAAO,EAAE,IADE;AAEXsB,YAAAA,QAAQ,EAAE;AAFC,WAAf;;AAIA,cAAIJ,IAAI,IAAI,IAAZ,EAAkB;AACdG,YAAAA,QAAQ,CAACrB,OAAT,GAAmB,OAAnB;AACAqB,YAAAA,QAAQ,CAACC,QAAT,GAAoB,IAApB;AACAX,YAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ;AACH,WAJD,MAKK;AAEDS,YAAAA,QAAQ,CAACrB,OAAT,GAAmBkB,IAAI,CAAClB,OAAxB;AACAqB,YAAAA,QAAQ,CAACC,QAAT,GAAoBJ,IAAI,CAACI,QAAzB;AACAX,YAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBS,QAAxB;AACH;;AACD,iBAAOA,QAAP;AACH,SA/CkC,CAiDnC;;;AACAE,QAAAA,WAAW,CAACvB,OAAD,EAAesB,QAAf,EAA8B;AACrC,cAAIJ,IAAI,GAAG;AACPlB,YAAAA,OAAO,EAAEA,OADF;AAEPsB,YAAAA,QAAQ,EAAEA;AAFH,WAAX;AAIA1B,UAAAA,GAAG,CAACoB,YAAJ,CAAiBQ,OAAjB,CAAyB,UAAzB,EAAqCL,IAAI,CAACM,SAAL,CAAeP,IAAf,CAArC;AACH;;AAEDQ,QAAAA,MAAM,CAACC,SAAD,EAAoB,CAEzB;;AA5DkC,O,UAU5BlB,Q,GAAW,I","sourcesContent":["import { _decorator, Component, Node, sys } from 'cc';\r\nconst { ccclass, property } = _decorator;\r\n@ccclass('userMgr')\r\nexport class userMgr extends Component {\r\n\r\n    public account = null;  //账号\r\n    public userid = 0;      //用户id\r\n    public nickname = '';   //昵称\r\n    public score = 0;   //分数\r\n    public sign = 0;        //标志\r\n    public ip = '';         //ip\r\n    public sex = 0;         //性别 \r\n    public roomid = null; //房间数据\r\n    static instance = null;\r\n\r\n    public static getInstance() {\r\n        if (userMgr.instance == null) {\r\n            userMgr.instance = new userMgr();\r\n            return userMgr.instance;\r\n        }\r\n        else {\r\n            return userMgr.instance;\r\n        }\r\n    }\r\n\r\n    start() {\r\n        console.log('userMgr =====')\r\n        globalThis.userMgr = userMgr.getInstance();\r\n    }\r\n\r\n    //获取账号信息\r\n    getAccount() {\r\n        let userData = sys.localStorage.getItem('userinfo');\r\n        let data = JSON.parse(userData);\r\n        let userinfo = {\r\n            account: null,\r\n            password: null\r\n        };\r\n        if (data == null) {\r\n            userinfo.account = 'guest'\r\n            userinfo.password = null;\r\n            console.log('获取到本地账户:null');\r\n        }\r\n        else {\r\n\r\n            userinfo.account = data.account;\r\n            userinfo.password = data.password;\r\n            console.log('获取到本地账户:', userinfo);\r\n        }\r\n        return userinfo;\r\n    }\r\n\r\n    //保存账号信息\r\n    saveAccount(account: any, password: any) {\r\n        let data = {\r\n            account: account,\r\n            password: password,\r\n        }\r\n        sys.localStorage.setItem('userinfo', JSON.stringify(data));\r\n    }\r\n\r\n    update(deltaTime: number) {\r\n\r\n    }\r\n}\r\n\r\n\r\n"]}